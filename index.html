<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mundo de Amor - Teclado Num√©rico</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap');
    body {
      margin: 0;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      color: #4a1c40;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 3rem;
      margin-bottom: 10px;
      color: #b0003a;
      text-shadow: 2px 2px 5px #fff;
    }
    .heart {
      color: #e91e63;
      font-size: 2.8rem;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }
    .container {
      background: rgba(255,255,255,0.9);
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(180, 50, 90, 0.4);
      max-width: 480px;
      width: 100%;
      padding: 30px 25px;
      text-align: center;
    }
    #passwordDisplay {
      font-size: 2.5rem;
      letter-spacing: 15px;
      font-weight: 700;
      margin-bottom: 25px;
      color: #b0003a;
      font-family: 'Pacifico', cursive;
      border-bottom: 3px solid #e91e63;
      padding-bottom: 8px;
      background: #fff0f5;
      border-radius: 12px;
      box-shadow: inset 0 0 8px #f48fb1;
    }
    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }
    .key {
      background: linear-gradient(145deg, #ff6f91, #ff4b69);
      border-radius: 15px;
      color: white;
      font-size: 2.2rem;
      font-weight: 700;
      cursor: pointer;
      padding: 20px 0;
      box-shadow: 4px 4px 8px #c94c6d, -4px -4px 8px #ff7a9e;
      text-shadow: 1px 1px 3px #880e4f;
    }
    .key.delete {
      background: linear-gradient(145deg, #f44336, #d32f2f);
      font-size: 1.6rem;
    }
    .key.clear {
      background: linear-gradient(145deg, #9c27b0, #7b1fa2);
      font-size: 1.6rem;
    }
    #submitBtn {
      background: linear-gradient(145deg, #e91e63, #b0003a);
      border: none;
      border-radius: 30px;
      color: white;
      font-size: 1.6rem;
      font-weight: 700;
      padding: 15px 40px;
      cursor: pointer;
      box-shadow: 4px 4px 10px #880e4f, -4px -4px 10px #e91e63;
      margin-bottom: 25px;
    }
    #welcomeMessage {
      font-size: 1.5rem;
      font-weight: 700;
      color: #b0003a;
      display: none;
      font-family: 'Pacifico', cursive;
      text-shadow: 1px 1px 3px #fff;
      margin-bottom: 20px;
    }
    .section {
      background: #fce4ec;
      border: 2px solid #e91e63;
      border-radius: 15px;
      padding: 18px 22px;
      box-shadow: 0 6px 12px rgba(233, 30, 99, 0.25);
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 12px;
      cursor: pointer;
    }
    #salidasGallery {
      display: none;
      text-align: center;
      padding: 25px;
      background: #fff0f5;
      border-radius: 20px;
    }
    #uploadImagesBtn {
      background: linear-gradient(145deg, #ff80ab, #f06292);
      color: white;
      border: none;
      padding: 14px 30px;
      font-size: 1.2rem;
      font-weight: 700;
      border-radius: 25px;
      cursor: pointer;
      margin-bottom: 20px;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    .gallery a {
      display: inline-block;
    }
    .gallery img, .gallery video {
      width: 180px;
      height: 180px;
      border-radius: 15px;
      object-fit: cover;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
  </style>
  <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
</head>
<body>
  <h1>Mundo de Amor <span class="heart">‚ô•Ô∏è</span></h1>
  <div class="container">
    <div id="passwordSection">
      <div id="passwordDisplay"></div>
      <div class="keypad">
        <button class="key" data-key="1">1</button>
        <button class="key" data-key="2">2</button>
        <button class="key" data-key="3">3</button>
        <button class="key" data-key="4">4</button>
        <button class="key" data-key="5">5</button>
        <button class="key" data-key="6">6</button>
        <button class="key" data-key="7">7</button>
        <button class="key" data-key="8">8</button>
        <button class="key" data-key="9">9</button>
        <button class="key clear">C</button>
        <button class="key" data-key="0">0</button>
        <button class="key delete">‚å´</button>
      </div>
      <button id="submitBtn">Ingresar</button>
    </div>

    <p id="welcomeMessage">Bienvenido al mundo A ‚ô•Ô∏è C</p>

    <div id="sectionsContainer" style="display: none;">
      <div class="section" id="salidasBtn">
        <h2>SALIDAS</h2>
        <p>Momentos especiales para compartir juntos y disfrutar de la compa√±√≠a.</p>
      </div>
    </div>

    <div id="salidasGallery">
      <h2 style="font-family: 'Pacifico', cursive; color: #b0003a;">üå∏ Salidas Especiales</h2>
      <button id="uploadImagesBtn">Subir Im√°genes</button>
      <div id="salidasGalleryContainer" class="gallery"></div>
    </div>
  </div>
  <footer>
    <span class="heart">‚ô•Ô∏è</span><span class="heart">‚ô•Ô∏è</span><span class="heart">‚ô•Ô∏è</span>
  </footer>
  <script>
    const passwordDisplay = document.getElementById('passwordDisplay');
    const keys = document.querySelectorAll('.key');
    const submitBtn = document.getElementById('submitBtn');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const sectionsContainer = document.getElementById('sectionsContainer');
    const passwordSection = document.getElementById('passwordSection');

    let password = '';
    keys.forEach(key => {
      key.addEventListener('click', () => {
        const keyValue = key.getAttribute('data-key');
        if (key.classList.contains('delete')) {
          password = password.slice(0, -1);
        } else if (key.classList.contains('clear')) {
          password = '';
        } else if (keyValue && password.length < 6) {
          password += keyValue;
        }
        passwordDisplay.textContent = '*'.repeat(password.length);
      });
    });

    submitBtn.addEventListener('click', () => {
      if (password === '030122') {
        passwordSection.style.display = 'none';
        welcomeMessage.style.display = 'block';
        sectionsContainer.style.display = 'flex';
      } else {
        alert('Contrase√±a incorrecta. Intenta de nuevo ‚ù§Ô∏è');
      }
      password = '';
      passwordDisplay.textContent = '';
    });

   const uploadBtn = document.getElementById('uploadImagesBtn');
    const galleryContainer = document.getElementById('salidasGalleryContainer');
    const cloudName = 'dlchy81nh';
    const tag = 'salidas';

    function mostrarArchivo(url, mime) {
      const a = document.createElement('a');
      a.href = url;
      a.target = '_blank';
      a.download = '';
      const el = mime.includes('video') ? document.createElement('video') : document.createElement('img');
      el.src = url;
      el.style.width = '180px';
      el.style.height = '180px';
      el.style.objectFit = 'cover';
      el.style.borderRadius = '15px';
      el.style.boxShadow = '0 4px 10px rgba(0,0,0,0.2)';
      if (mime.includes('video')) el.controls = true;
      a.appendChild(el);
      galleryContainer.appendChild(a);
    }

    uploadBtn.addEventListener('click', () => {
      cloudinary.openUploadWidget({
        cloudName: cloudName,
        uploadPreset: 'unsigned_preset',
        sources: ['local', 'camera'],
        multiple: true,
        resourceType: 'auto',
        tags: [tag]
      }, (error, result) => {
        if (!error && result && result.event === "success") {
          const url = result.info.secure_url;
          const mime = result.info.resource_type === 'video' ? 'video/mp4' : 'image/jpeg';
          mostrarArchivo(url, mime);
        }
      });
    });

    async function cargarImagenesPorEtiqueta() {
      galleryContainer.innerHTML = '';

      const endpoints = [
        `https://res.cloudinary.com/${cloudName}/image/list/${tag}.json`,
        `https://res.cloudinary.com/${cloudName}/video/list/${tag}.json`
      ];

      for (const endpoint of endpoints) {
        try {
          const res = await fetch(endpoint);
          const data = await res.json();

          data.resources.forEach(item => {
            const mime = endpoint.includes('/video/') ? 'video/mp4' : 'image/jpeg';
            const mediaUrl = `https://res.cloudinary.com/${cloudName}/${mime.startsWith('video') ? 'video' : 'image'}/upload/${item.public_id}.${item.format}`;
            mostrarArchivo(mediaUrl, mime);
          });
        } catch (err) {
          console.warn("No se pudo cargar desde:", endpoint, err);
        }
      }

      if (!galleryContainer.children.length) {
        galleryContainer.innerHTML = '<p style="color:#b0003a;">No se encontraron im√°genes ni videos üå∏</p>';
      }
    }

    window.onload = cargarImagenesPorEtiqueta;
  </script>
</body>
</html>